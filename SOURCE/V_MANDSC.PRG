CLOSE DATA
SET DELE ON
SET TALK OFF
SET EXCLU OFF
SET EXACT OFF

CLEAR
PART=SPACE(15)
EMPR=' '

@ 5,5 TO 11,75
@ 7,10 SAY '                  INGRESE CODIGO DE EMPRESA:' GET EMPR PICTURE '9' COLOR GR+/B
@ 9,10 SAY 'INGRESE CODIGO QUE DESEA VER (BLANCO=TODOS):' GET PART  COLOR GR+/B
READ

CLEAR

IF LASTKEY()=27
  CLOSE DATA
  RETURN
ENDIF
 
SELECT 1
USE V_DESCTO ORDER PART
SET FILTER TO DE_EMPR=EMPR .AND. DE_PART=ALLTRIM(PART)

SELECT 2
USE V_ITEMS ORDER PART

SELECT 1
SET RELATION TO DE_EMPR+DE_PART INTO V_ITEMS
GO BOTT

DEFINE WINDOW  MOD_LINEAS FROM 0,1 TO 21,78

ON KEY LABEL F10 KEYBOARD CHR(23)
ON KEY LABEL F4  KEYBOARD CHR(14)
ON KEY LABEL F8  KEYBOARD CHR(20)

@ 22,5 to 24,75 DOUBLE

@ 23,10 SAY '[F4]-ADICIONA REGISTRO  [F8]-BORRA REGISTRO  [F10]-SALIR' COLOR GR+/B

BROW FIELDS DE_EMPR:H='EMPR.', DE_PART:H='CODIGO':10, DESCR=IIF(V_ITEMS.IT_DESCR=SPACE(15),'ITEM NO EXISTE',V_ITEMS.IT_DESCR):20:H='DESCRIPCION':W=.F., ;
     DE_CATEGO:H='CATEGO.':10, DE_DESCTO:H='% DESCTO', DE_FECHAI:H='DEL', DE_FECHAF:H='AL' ;
     WINDOW MOD_LINEAS TITLE 'TABLA DE DESCTOS'

CLOSE DATA
RELEASE WINDOW MOD_LINEAS
CLEAR
RETURN     