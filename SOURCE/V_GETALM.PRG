PROCEDURE V_GETALM
*****************
PUBLIC ALM, MI_ALM

SET DELE ON

SELECT 0
USE V_ALM ORDER ALM

ALM=AL_ALM
MI_ALM=alltrim(AL_DESCR)

COUNT TO COUNTER

IF COUNTER>1
  * MUESTRA EMPRESAS
  ACTIVATE SCREEN
  CLEAR
  @ 6,5,19,78 BOX REPLICATE("°",8)+"°"
  @ 6,5 FILL TO 19,78 COLOR N+/N
  DEFINE WINDOW MI_ALMA FROM 5,3 TO 18,76 DOUBLE FILL CHR(177) TITLE '[ESC] PARA SALIR' 
  ACTIVATE WINDOW MI_ALMA
  @ 3,0
  GO TOP
  COUNTER=0
  DO WHILE .NOT. EOF()
    @ 3+counter,33 SAY ' '+AL_ALM+'-'+AL_DESCR COLOR W/B
    counter=counter+1
    SKIP
  ENDDO 
  @ 2,32 TO 3+COUNTER,67 DOUBLE COLOR W/B
  
  * PIDE Y VERIFICA ALM
  DO WHILE .T. .AND. LASTKEY()<>27
    @ 3, 7 SAY ' SELECCIONE ALMACEN:' GET ALM PICTURE '99' COLOR W/B
    READ
    SEEK EMPRESA+ALM  
    IF .NOT. EOF()
      MI_ALM=alltrim(AL_DESCR)
      EXIT
    ENDIF
  ENDDO
  RELEASE WINDOW MI_ALMA  
  CLEAR
ENDIF  

USE

RETURN